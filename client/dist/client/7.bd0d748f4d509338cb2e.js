(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{X3zk:function(t,n,o){"use strict";o.r(n),o.d(n,"LoginModule",(function(){return _}));var e=o("tyNb"),r=o("s7LF"),c=o("wUL2"),a=o("fXoL"),i=o("IheW");let s=(()=>{class t{constructor(t){this.http=t}login(t){return this.http.post("/login",t)}register(t){return this.http.post("/register",t)}}return t.\u0275fac=function(n){return new(n||t)(a.Vb(i.b))},t.\u0275prov=a.Hb({token:t,factory:t.\u0275fac}),t})();var b=o("dNgK"),l=o("Wp6s"),m=o("ofXK"),g=o("kmnG"),d=o("qFsG"),u=o("NFeN"),p=o("bTqV"),f=o("zQhy"),h=o("bSwM");function w(t,n){if(1&t&&(a.Rb(0,"mat-error"),a.xc(1),a.Qb()),2&t){const t=a.cc(2);a.Ab(1),a.zc(" ",null==t.loginForm.controls.email.errors?null:t.loginForm.controls.email.errors.backend," ")}}function x(t,n){if(1&t&&(a.Rb(0,"mat-error"),a.xc(1),a.Qb()),2&t){const t=a.cc(2);a.Ab(1),a.zc(" ",null==t.loginForm.controls.password.errors?null:t.loginForm.controls.password.errors.backend," ")}}function P(t,n){if(1&t){const t=a.Sb();a.Rb(0,"mat-card-content"),a.Rb(1,"form",3),a.Yb("ngSubmit",(function(){return a.oc(t),a.cc().submit()})),a.Rb(2,"mat-form-field",4),a.Rb(3,"mat-label"),a.xc(4,"Email"),a.Qb(),a.Mb(5,"input",5),a.Rb(6,"mat-icon",6),a.xc(7,"email"),a.Qb(),a.wc(8,w,2,1,"mat-error",7),a.Qb(),a.Rb(9,"mat-form-field",4),a.Rb(10,"mat-label"),a.xc(11,"Password"),a.Qb(),a.Mb(12,"input",8),a.Rb(13,"mat-icon",6),a.xc(14),a.Qb(),a.Rb(15,"mat-icon",9),a.Yb("click",(function(){a.oc(t);const n=a.cc();return n.showPassword=!n.showPassword})),a.xc(16),a.Qb(),a.wc(17,x,2,1,"mat-error",7),a.Qb(),a.Rb(18,"button",10),a.xc(19," Submit "),a.Qb(),a.Qb(),a.Rb(20,"span",11),a.xc(21," Don't have account? "),a.Rb(22,"a",12),a.Yb("click",(function(){return a.oc(t),a.cc().changeAction()})),a.xc(23,"Sign Up"),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=a.cc();a.Ab(1),a.ic("formGroup",t.loginForm),a.Ab(7),a.ic("ngIf",null==t.loginForm.controls.email.errors?null:t.loginForm.controls.email.errors.backend),a.Ab(4),a.ic("type",t.showPassword?"text":"password"),a.Ab(2),a.zc(" ",t.showPassword?"lock_open":"lock"," "),a.Ab(2),a.zc(" ",t.showPassword?"visibility_off":"visibility"," "),a.Ab(1),a.ic("ngIf",null==t.loginForm.controls.password.errors?null:t.loginForm.controls.password.errors.backend),a.Ab(1),a.ic("disabled",t.loginForm.invalid)}}function R(t,n){if(1&t&&(a.Rb(0,"mat-error"),a.xc(1),a.Qb()),2&t){const t=a.cc(2);a.Ab(1),a.zc(" ",null==t.registerForm.controls.email.errors?null:t.registerForm.controls.email.errors.backend," ")}}function M(t,n){if(1&t){const t=a.Sb();a.Rb(0,"mat-card-content"),a.Rb(1,"form",3),a.Yb("ngSubmit",(function(){return a.oc(t),a.cc().submit()})),a.Rb(2,"mat-form-field",4),a.Rb(3,"mat-label"),a.xc(4,"Name"),a.Qb(),a.Mb(5,"input",13),a.Rb(6,"mat-icon",6),a.xc(7,"face"),a.Qb(),a.Qb(),a.Rb(8,"mat-form-field",4),a.Rb(9,"mat-label"),a.xc(10,"Email"),a.Qb(),a.Mb(11,"input",5),a.Rb(12,"mat-icon",6),a.xc(13,"email"),a.Qb(),a.wc(14,R,2,1,"mat-error",7),a.Qb(),a.Rb(15,"mat-form-field",4),a.Rb(16,"mat-label"),a.xc(17,"Password"),a.Qb(),a.Mb(18,"input",8),a.Rb(19,"mat-icon",6),a.xc(20),a.Qb(),a.Rb(21,"mat-icon",9),a.Yb("click",(function(){a.oc(t);const n=a.cc();return n.showPassword=!n.showPassword})),a.xc(22),a.Qb(),a.Qb(),a.Rb(23,"mat-radio-group",14),a.Rb(24,"span"),a.xc(25,"Gender: "),a.Qb(),a.Rb(26,"mat-radio-button",15),a.xc(27,"Male"),a.Qb(),a.Rb(28,"mat-radio-button",16),a.xc(29,"Female"),a.Qb(),a.Qb(),a.Rb(30,"mat-checkbox",17),a.Yb("change",(function(){a.oc(t);const n=a.cc();return n.agreement=!n.agreement})),a.xc(31,"I agree to the Terms and Conditions"),a.Qb(),a.Rb(32,"button",10),a.xc(33," Submit "),a.Qb(),a.Qb(),a.Rb(34,"span",11),a.xc(35," Have an account? "),a.Rb(36,"a",12),a.Yb("click",(function(){return a.oc(t),a.cc().changeAction()})),a.xc(37,"Sign In"),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=a.cc();a.Ab(1),a.ic("formGroup",t.registerForm),a.Ab(13),a.ic("ngIf",null==t.registerForm.controls.email.errors?null:t.registerForm.controls.email.errors.backend),a.Ab(4),a.ic("type",t.showPassword?"text":"password"),a.Ab(2),a.zc(" ",t.showPassword?"lock_open":"lock"," "),a.Ab(2),a.zc(" ",t.showPassword?"visibility_off":"visibility"," "),a.Ab(8),a.ic("checked",t.agreement),a.Ab(2),a.ic("disabled",!t.agreement||t.registerForm.invalid)}}const C=[{path:"",component:(()=>{class t{constructor(t,n,o,e){this.service=n,this.router=o,this.snackbar=e,localStorage.getItem(c.a.TOKEN)&&(localStorage.getItem(c.a.ROLE)?this.router.navigate(["/"+localStorage.getItem(c.a.ROLE)]):localStorage.clear()),this.action="sign in",this.role=sessionStorage.getItem(c.a.MAIN_ROLE)||"client",this.loginForm=t.group({email:["",r.o.required],password:["",r.o.required]}),this.registerForm=t.group({name:["",r.o.required],password:["",r.o.required],email:["",r.o.required],gender:["",r.o.required]})}ngOnInit(){}changeAction(){this.showPassword=!1,this.agreement=!1,this.action="sign in"==this.action?"register":"sign in"}submit(){let t,n;switch(this.action){case"sign in":n=this.loginForm,t=this.service.login(this.loginForm.value);break;case"register":n=this.registerForm,t=this.service.register(this.registerForm.value)}t.subscribe(t=>{localStorage.setItem(c.a.TOKEN,t.token),localStorage.setItem(c.a.NAME,t.user.name),localStorage.setItem(c.a.ROLE,t.user.role),this.router.navigate(["/"+t.user.role]),sessionStorage.removeItem(c.a.MAIN_ROLE)},t=>{if(t&&"object"==typeof t){let o=n.controls[t.control];o?o.setErrors({backend:t.message}):this.snackbar.open(t.message,"OK")}})}}return t.\u0275fac=function(n){return new(n||t)(a.Lb(r.c),a.Lb(s),a.Lb(e.a),a.Lb(b.a))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-login"]],decls:7,vars:6,consts:[[1,"card-container"],[1,"card",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","required","","placeholder","user@example.com","type","email","formControlName","email"],["matPrefix",""],[4,"ngIf"],["matInput","","required","","formControlName","password",3,"type"],["matSuffix","","color","primary",2,"cursor","pointer",3,"click"],["mat-raised-button","","color","primary",3,"disabled"],[1,"anchor-inside"],[3,"click"],["matInput","","required","","placeholder","ex: mohammad","type","text","formControlName","name"],["aria-label","Select an option","formControlName","gender"],["value","male"],["value","female"],[1,"agreement",3,"checked","change"]],template:function(t,n){1&t&&(a.Rb(0,"div",0),a.Rb(1,"mat-card",1),a.Rb(2,"mat-card-title"),a.xc(3),a.dc(4,"titlecase"),a.Qb(),a.wc(5,P,24,7,"mat-card-content",2),a.wc(6,M,38,7,"mat-card-content",2),a.Qb(),a.Qb()),2&t&&(a.Ab(1),a.ic("ngSwitch",n.action),a.Ab(2),a.zc(" ",a.ec(4,4,n.action)," "),a.Ab(2),a.ic("ngSwitchCase","sign in"),a.Ab(1),a.ic("ngSwitchCase","register"))},directives:[l.a,m.n,l.d,m.o,l.b,r.p,r.k,r.e,g.c,g.f,d.a,r.b,r.n,r.j,r.d,u.a,g.g,m.l,g.h,p.a,g.b,f.b,f.a,h.a],pipes:[m.s],styles:[".card-container[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;right:0;display:flex}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:auto;min-width:350px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .mat-radio-group[_ngcontent-%COMP%]{display:flex;margin-bottom:8px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .mat-radio-group[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{flex:1}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .mat-radio-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .agreement[_ngcontent-%COMP%]{margin-bottom:8px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   span.anchor-inside[_ngcontent-%COMP%]{display:block;margin-top:14px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   span.anchor-inside[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#00f;cursor:pointer}"]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({factory:function(n){return new(n||t)},imports:[[e.b.forChild(C)],e.b]}),t})();var Q=o("RCYx");let _=(()=>{class t{}return t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({factory:function(n){return new(n||t)},providers:[s],imports:[[Q.a,O]]}),t})()}}]);